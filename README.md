# 🎰 自制娱乐刮刮卡 (Scratch Card App)

这是一个基于 Flask 开发的移动端优先的在线刮刮卡应用。它模拟了真实的刮卡体验，包括涂层刮除效果、3D 卡片选择界面以及完整的后台管理系统。

## ✨ 功能特点

*   **📱 移动端优先体验**：
    *   **3D 卡片堆叠 (Swiper)**：炫酷的卡片浏览效果。
    *   **虚拟滚动 (Virtual Scroll)**：支持大量卡片流畅滑动。
    *   **真实刮卡手感**：基于 Canvas 的涂层刮除逻辑，支持刮开 60% 自动判定完成。
*   **🎮 趣味玩法**：
    *   **倍数机制**：支持 x1, x2, x3 倍数奖励。
    *   **智能奖池**：基于动态规划算法自动分配奖金，确保奖池金额精准匹配。
*   **🛠️ 完善的后台**：
    *   参数化配置：可自定义总票数、总奖池、中奖率及面额。
    *   实时数据监控：查看用户参与情况及奖池剩余。

## 🚀 快速开始

### 1. 环境准备

确保你的系统已安装 Python 3.8 或更高版本。

```bash
# 克隆或下载本项目到本地
cd scratchforFun
```

### 2. 安装依赖

本项目依赖较少，建议创建虚拟环境后安装：

```bash
# 创建虚拟环境 (可选)
python3 -m venv venv
source venv/bin/activate  # macOS/Linux
# venv\Scripts\activate   # Windows

# 安装 Flask
pip install flask
```

*(注：本项目主要依赖 Flask，以及 Python 内置的 sqlite3, json, random 等库)*

### 3. 运行应用

```bash
python3 app.py
```

启动成功后，终端会显示访问地址，通常为：
*   本地访问：`http://127.0.0.1:5001`
*   局域网访问：`http://<你的局域网IP>:5001` (支持手机连接同一 WiFi 访问)

## 📖 使用指南

### 👤 普通用户
1.  打开首页，使用分配的账号登录。
2.  进入 **Dashboard**，通过滑动或搜索选择一张心仪的卡片。
3.  点击卡片进入刮奖页面，用手指或鼠标刮开涂层。
4.  中奖后系统会自动记录并统计。

### ⚙️ 管理员设置
1.  访问管理员入口（路径请咨询部署人员）。
2.  输入管理员密码登录后台。
3.  在后台可以：
    *   重置整个活动（慎用！会清除所有数据）。
    *   调整奖金池总额和中奖票数。
    *   查看所有票据的状态（已刮/未刮）。

## 📂 项目结构

```
scratchforFun/
├── app.py              # 主程序入口
├── setting.json        # 配置文件 (自动生成)
├── xx.sqlite           # 数据库文件 (自动生成)
├── static/             # 静态资源 (CSS, JS, Images)
└── templates/          # HTML 模板
    ├── dashboard.html  # 选卡大厅
    ├── scratch_card.html # 刮卡页面
    └── ...
```

## ⚠️ 注意事项

*   **数据重置**：修改 `setting.json` 或在后台点击“保存配置并重置系统”会清空所有用户数据和票据记录，请务必谨慎操作。
*   **移动端适配**：本项目针对手机浏览器进行了深度优化，建议使用手机访问以获得最佳体验。

---
Enjoy your lucky scratch! 🎉
